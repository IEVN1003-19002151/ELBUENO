import{a as j}from"./chunk-NGCGQYSJ.js";import{a as k}from"./chunk-YLXB3D7D.js";import{D as E,G as n,H as s,I as _,J as w,M as g,P as t,Q as i,R as c,S,T as p,U as u,V as a,W as x,X as d,ca as b,ea as h,ha as C,ka as I,ma as y,oa as F,sa as D,ua as P,w as f,x as v}from"./chunk-UEFORAMN.js";import"./chunk-TRNF7YA4.js";function O(m,o){if(m&1){let e=S();t(0,"div",7)(1,"div",8),c(2,"img",9)(3,"div",10),i(),t(4,"div",11)(5,"div",12)(6,"div",13),c(7,"i",14),t(8,"span",15),a(9),i()(),t(10,"span",16),a(11),i()(),t(12,"div",17)(13,"h1",18),a(14),i(),t(15,"div",19)(16,"p",20),a(17),b(18,"number"),i(),t(19,"div",21)(20,"p",22),a(21),b(22,"number"),i(),t(23,"span",23),a(24),i()()()(),t(25,"div",24)(26,"h2",25),c(27,"i",26),a(28," Sobre la promoci\xF3n "),i(),t(29,"p",27),a(30),i()(),t(31,"div",28)(32,"div",29)(33,"span",30),a(34,"Cantidad"),i(),t(35,"div",31)(36,"button",32),p("click",function(){f(e);let r=u();return v(r.cambiarCantidad(-1))}),c(37,"i",33),i(),t(38,"span",34),a(39),i(),t(40,"button",32),p("click",function(){f(e);let r=u();return v(r.cambiarCantidad(1))}),c(41,"i",35),i()()()(),t(42,"button",36),p("click",function(){f(e);let r=u();return v(r.agregarAlCarrito())}),c(43,"div",37),t(44,"div",38),c(45,"i",39),t(46,"span",40),a(47,"Agregar al carrito"),i()()()()()}if(m&2){let e=u();n(2),g("src",e.promocion.imagenUrl,E)("alt",e.promocion.nombre),n(7),x(e.promocion.rating||0),n(2),d(" ",e.promocion.categoria," "),n(3),x(e.promocion.nombre),n(3),d(" $",h(18,10,e.promocion.precioPromocional,"1.2-2")," "),n(4),d(" $",h(22,13,e.promocion.precioOriginal,"1.2-2")," "),n(3),d(" ",e.calcularDescuento(e.promocion.precioOriginal,e.promocion.precioPromocional),"% OFF "),n(6),d(" ",e.promocion.descripcion," "),n(9),x(e.cantidad)}}function T(m,o){m&1&&(t(0,"div",41)(1,"div",42),c(2,"div",43)(3,"div",44),i()())}var A=class m{constructor(o,e,l,r,V){this.route=o;this.router=e;this.promocionService=l;this.carritoService=r;this.location=V}promocion;loading=!0;cantidad=1;subscriptions=[];ngOnInit(){this.loading=!0;let o=this.route.params.subscribe(e=>{let l=e.id;l&&this.promocionService.getPromocionPorId(l).subscribe({next:r=>{this.promocion=r,this.loading=!1,console.log("Promoci\xF3n cargada:",r)},error:r=>{console.error("Error al cargar la promoci\xF3n:",r),this.loading=!1,this.router.navigate(["/"])}})});this.subscriptions.push(o)}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}volver(){this.location.back()}cambiarCantidad(o){let e=this.cantidad+o;e>=1&&(this.cantidad=e)}agregarAlCarrito(){this.promocion?(console.log("Agregando al carrito:",this.promocion),this.carritoService.agregarItem({id:this.promocion.promocionId,nombre:this.promocion.nombre,precio:this.promocion.precioPromocional,tipo:"promocion",imagenUrl:this.promocion.imagenUrl,cantidad:this.cantidad}),console.log("Item agregado al carrito"),this.router.navigate(["/carrito"])):console.error("No hay promoci\xF3n seleccionada para agregar al carrito")}calcularDescuento(o,e){return o>0?Math.round((o-e)/o*100):0}static \u0275fac=function(e){return new(e||m)(s(D),s(P),s(j),s(k),s(C))};static \u0275cmp=_({type:m,selectors:[["app-detalle-promocion"]],decls:7,vars:2,consts:[[1,"min-h-screen","bg-gradient-to-br","from-[#FFF8E7]","via-white","to-[#F5E6D3]"],[1,"fixed","top-0","left-0","z-50","p-4"],[1,"group","p-3","rounded-full","bg-white/80","backdrop-blur-sm","hover:bg-[#6F4E37]/10","transition-all","duration-500","shadow-lg",3,"click"],[1,"fas","fa-arrow-left","text-[#6F4E37]","group-hover:-translate-x-1","transition-transform","duration-300"],[1,"max-w-4xl","mx-auto"],["class","animate-slideUp",4,"ngIf"],["class","flex justify-center items-center h-[70vh]",4,"ngIf"],[1,"animate-slideUp"],[1,"group","relative","h-[70vh]","w-full","overflow-hidden"],[1,"w-full","h-full","object-cover","transition-transform","duration-1000","group-hover:scale-105","filter","group-hover:brightness-110",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/50","via-transparent","to-transparent"],[1,"bg-white/80","backdrop-blur-xl","rounded-t-[2.5rem]","p-8","-mt-20","relative","z-10","transform","transition-all","duration-500","hover:shadow-xl"],[1,"flex","items-center","gap-2","mb-4"],[1,"flex","items-center","gap-1","bg-yellow-400/10","px-3","py-1.5","rounded-full"],[1,"fas","fa-star","text-yellow-400"],[1,"text-[#6F4E37]","font-medium"],[1,"px-3","py-1.5","bg-[#F5E6D3]","text-[#6F4E37]","rounded-full","text-sm","font-medium"],[1,"flex","justify-between","items-start","mb-8"],[1,"text-3xl","font-bold","text-[#333]","leading-tight"],[1,"text-right"],[1,"text-4xl","font-bold","bg-gradient-to-r","from-[#6F4E37]","to-[#8B6E4E]","text-transparent","bg-clip-text","transform","transition-all","duration-300","group-hover:scale-110"],[1,"flex","items-center","gap-2","mt-2","justify-end"],[1,"text-lg","text-[#666]","line-through"],[1,"bg-red-500/10","text-red-500","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"mb-8"],[1,"text-lg","font-semibold","text-[#6F4E37]","mb-3","flex","items-center","gap-2"],[1,"fas","fa-info-circle"],[1,"text-[#666]","leading-relaxed","text-lg","transition-all","duration-300","hover:text-[#333]","p-4","rounded-xl","hover:bg-[#F5E6D3]/20"],[1,"bg-gradient-to-r","from-[#FFF8E7]","to-white","p-6","rounded-2xl","mb-8","transform","transition-all","duration-300","hover:shadow-lg"],[1,"flex","items-center","justify-between"],[1,"font-medium","text-[#6F4E37]","text-lg"],[1,"flex","items-center","gap-6"],[1,"group","w-12","h-12","rounded-full","bg-[#6F4E37]","text-white","flex","items-center","justify-center","transition-all","duration-300","hover:bg-[#8B6E4E]","hover:shadow-lg","active:scale-95",3,"click"],[1,"fas","fa-minus","group-hover:scale-110","transition-transform","duration-300"],[1,"font-semibold","text-2xl","w-10","text-center","text-[#6F4E37]"],[1,"fas","fa-plus","group-hover:scale-110","transition-transform","duration-300"],[1,"group","w-full","bg-gradient-to-r","from-[#6F4E37]","to-[#8B6E4E]","text-white","py-5","rounded-2xl","font-medium","text-lg","overflow-hidden","relative","transition-all","duration-500","hover:shadow-xl",3,"click"],[1,"absolute","inset-0","bg-white","transform","scale-x-0","group-hover:scale-x-100","transition-transform","duration-500","origin-left","mix-blend-overlay"],[1,"relative","flex","items-center","justify-center","gap-3"],[1,"fas","fa-shopping-cart","text-xl","group-hover:rotate-12","transition-transform","duration-500"],[1,"group-hover:tracking-wider","transition-all","duration-500"],[1,"flex","justify-center","items-center","h-[70vh]"],[1,"relative"],[1,"w-16","h-16","rounded-full","border-4","border-[#6F4E37]/20","border-t-[#6F4E37]","animate-spin"],[1,"absolute","inset-0","rounded-full","border-4","border-transparent","animate-pulse"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"button",2),p("click",function(){return l.volver()}),c(3,"i",3),i()(),t(4,"div",4),w(5,O,48,16,"div",5)(6,T,4,0,"div",6),i()()),e&2&&(n(5),g("ngIf",l.promocion),n(),g("ngIf",!l.promocion))},dependencies:[F,I,y],encapsulation:2})};export{A as DetallePromocionComponent};
